<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harmonia: The Apex Match System</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --parchment-50: #fbf9f5;
            --parchment-100: #f5f0e6;
            --parchment-200: #e6ddd0;
            --parchment-900: #2c241b;
            --mediterranean-500: #2a4e6c;
            --mediterranean-600: #1f3b54;
            --champagne-400: #d4af37;
            --champagne-500: #c5a028;
            --danger-500: #8b0000;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--parchment-50);
            color: var(--parchment-900);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FULL-PAGE LAYOUT SYSTEM
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .module {
            display: none;
            min-height: 100vh;
            width: 100%;
            position: relative;
        }

        .module.active {
            display: flex;
        }

        /* Full-width container */
        .full-container {
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
            padding: 60px 80px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TYPOGRAPHY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        h1, h2, h3 {
            font-family: 'Cormorant Garamond', serif;
        }

        h1 {
            font-size: 72px;
            font-weight: 600;
            line-height: 1.1;
            letter-spacing: -0.02em;
        }

        h2 {
            font-size: 48px;
            font-weight: 500;
            line-height: 1.2;
        }

        h3 {
            font-size: 32px;
            font-weight: 500;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MODULE 1: SETUP - FULL WIDTH CONCIERGE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #module-setup {
            background: linear-gradient(135deg, var(--parchment-50) 0%, var(--parchment-100) 100%);
            align-items: center;
            justify-content: center;
        }

        .setup-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 100px;
            align-items: center;
            width: 100%;
        }

        .setup-left h1 {
            margin-bottom: 24px;
            color: var(--mediterranean-500);
        }

        .setup-left p {
            font-size: 20px;
            line-height: 1.6;
            color: var(--parchment-900);
            opacity: 0.8;
            margin-bottom: 60px;
        }

        .form-group {
            margin-bottom: 40px;
        }

        .form-label {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--mediterranean-500);
            margin-bottom: 12px;
            display: block;
        }

        .form-input {
            width: 100%;
            border: none;
            border-bottom: 2px solid var(--parchment-200);
            background: transparent;
            padding: 16px 0;
            font-family: 'DM Sans', sans-serif;
            font-size: 24px;
            color: var(--parchment-900);
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-bottom-color: var(--mediterranean-500);
        }

        /* Gender Toggle */
        .gender-toggle {
            display: flex;
            background: var(--parchment-100);
            border-radius: 50px;
            padding: 4px;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .gender-option {
            flex: 1;
            padding: 16px 32px;
            text-align: center;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 2;
            position: relative;
        }

        .gender-option.active {
            background: var(--champagne-400);
            color: white;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        /* DNA Upload - Right Side */
        .setup-right {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .dna-seal-large {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--parchment-100), var(--parchment-200));
            border: 4px solid var(--champagne-400);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            box-shadow: 0 10px 40px rgba(42, 78, 108, 0.1);
        }

        .dna-seal-large:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 50px rgba(42, 78, 108, 0.15);
            animation: breathe 2s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1.05); }
            50% { transform: scale(1.08); }
        }

        .seal-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(to top, var(--champagne-500), var(--champagne-400));
            transition: height 3s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 50%;
        }

        .seal-fill.filling {
            height: 100%;
        }

        .dna-icon {
            font-size: 120px;
            z-index: 2;
        }

        .processing-text {
            margin-top: 30px;
            font-size: 18px;
            color: var(--mediterranean-500);
            font-weight: 600;
            text-align: center;
            min-height: 25px;
        }

        .begin-btn {
            margin-top: 60px;
            padding: 20px 60px;
            background: var(--mediterranean-500);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(42, 78, 108, 0.2);
        }

        .begin-btn:hover {
            background: var(--mediterranean-600);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(42, 78, 108, 0.3);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MODULE 2: CALIBRATION - FULL SCREEN GALLERY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #module-calibration {
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--parchment-50);
        }

        .calibration-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .calibration-header h2 {
            color: var(--mediterranean-500);
            margin-bottom: 16px;
        }

        .calibration-header p {
            font-size: 18px;
            color: var(--parchment-900);
            opacity: 0.7;
        }

        /* Portrait Display - HUGE */
        .portrait-display {
            width: 600px;
            height: 600px;
            border: 6px solid var(--champagne-400);
            border-radius: 12px;
            background: var(--parchment-100);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 300px;
            margin-bottom: 60px;
            transition: all 0.6s ease;
            box-shadow: 0 15px 60px rgba(0,0,0,0.1);
        }

        .portrait-display.magnetic {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15), rgba(197, 160, 40, 0.2));
            border-color: var(--champagne-400);
            box-shadow: 0 15px 60px rgba(212, 175, 55, 0.3);
        }

        .portrait-display.indifferent {
            background: linear-gradient(135deg, rgba(42, 78, 108, 0.05), rgba(31, 59, 84, 0.08));
            filter: saturate(0.7);
        }

        /* Slider - MASSIVE */
        .slider-container {
            width: 800px;
            margin-bottom: 40px;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 16px;
            font-weight: 600;
            color: var(--mediterranean-500);
        }

        .slider-track {
            width: 100%;
            height: 12px;
            background: linear-gradient(to right,
                var(--mediterranean-500) 0%,
                var(--parchment-200) 50%,
                var(--champagne-400) 100%);
            border-radius: 6px;
            position: relative;
            cursor: pointer;
        }

        .slider-thumb {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: var(--champagne-400);
            border: 4px solid white;
            border-radius: 50%;
            cursor: grab;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.1s ease;
        }

        .slider-thumb:active {
            cursor: grabbing;
            transform: translate(-50%, -50%) scale(1.1);
        }

        .rating-feedback {
            text-align: center;
            font-size: 28px;
            font-weight: 600;
            color: var(--mediterranean-500);
            min-height: 40px;
            margin-bottom: 40px;
            transition: all 0.3s ease;
        }

        .rating-feedback.magnetic {
            color: var(--champagne-500);
        }

        .rating-feedback.indifferent {
            color: var(--mediterranean-500);
        }

        .calibration-progress {
            font-size: 16px;
            color: var(--parchment-900);
            opacity: 0.6;
            margin-bottom: 20px;
        }

        .next-btn {
            padding: 18px 50px;
            background: var(--mediterranean-500);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            background: var(--mediterranean-600);
            transform: translateY(-2px);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MODULE 3: ASSESSMENT - FULL PAGE QUESTIONS WITH TEXT BOXES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #module-assessment {
            background: var(--parchment-50);
            align-items: center;
            justify-content: center;
        }

        .assessment-layout {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 60px;
            width: 100%;
            max-width: 1400px;
        }

        /* Vertical Progress Tube - Left */
        .progress-tube-vertical {
            width: 80px;
            height: 70vh;
            min-height: 600px;
            background: rgba(42, 78, 108, 0.1);
            border: 3px solid var(--mediterranean-500);
            border-radius: 40px;
            position: relative;
            overflow: hidden;
        }

        .ink-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(to top, var(--mediterranean-600), var(--mediterranean-500));
            transition: height 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Question Card - Right */
        .question-panel {
            background: white;
            border-radius: 16px;
            padding: 80px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            min-height: 70vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .driver-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .driver-icon-large {
            font-size: 64px;
        }

        .driver-badge {
            background: var(--champagne-400);
            color: white;
            padding: 8px 24px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 0.1em;
        }

        .question-title {
            font-size: 42px;
            font-family: 'Cormorant Garamond', serif;
            color: var(--mediterranean-500);
            margin-bottom: 24px;
            line-height: 1.2;
        }

        .question-text {
            font-size: 22px;
            color: var(--parchment-900);
            line-height: 1.6;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        /* Text Box for Answer */
        .answer-textarea {
            width: 100%;
            min-height: 200px;
            padding: 24px;
            border: 2px solid var(--parchment-200);
            border-radius: 12px;
            font-family: 'DM Sans', sans-serif;
            font-size: 18px;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            background: var(--parchment-50);
        }

        .answer-textarea:focus {
            outline: none;
            border-color: var(--mediterranean-500);
            background: white;
            box-shadow: 0 4px 16px rgba(42, 78, 108, 0.1);
        }

        .word-count {
            font-size: 14px;
            color: var(--parchment-900);
            opacity: 0.5;
            margin-top: 12px;
        }

        .submit-answer-btn {
            padding: 18px 50px;
            background: var(--champagne-400);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            align-self: flex-end;
        }

        .submit-answer-btn:hover {
            background: var(--champagne-500);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.3);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MODULE 4: ANALYSIS - FULL SCREEN THEATER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #module-analysis {
            background: linear-gradient(135deg, var(--mediterranean-600), var(--mediterranean-500));
            align-items: center;
            justify-content: center;
            color: white;
        }

        .analysis-theater {
            text-align: center;
            width: 100%;
            max-width: 1000px;
        }

        .stage-visual {
            width: 600px;
            height: 600px;
            margin: 0 auto 60px;
        }

        .stage-visual svg {
            width: 100%;
            height: 100%;
        }

        .analysis-text {
            font-size: 48px;
            font-family: 'Cormorant Garamond', serif;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .analysis-detail {
            font-size: 20px;
            opacity: 0.8;
            font-family: 'DM Sans', sans-serif;
        }

        /* SVG Animations */
        .helix-strand {
            stroke: var(--champagne-400);
            stroke-width: 4;
            fill: none;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawHelix 2s ease-in-out infinite;
        }

        @keyframes drawHelix {
            to { stroke-dashoffset: 0; }
        }

        .hla-band {
            fill: var(--champagne-400);
            opacity: 0;
            animation: pulseBand 1s ease-in-out infinite alternate;
        }

        @keyframes pulseBand {
            to { opacity: 1; }
        }

        .face-mesh-line {
            stroke: white;
            stroke-width: 2;
            fill: none;
            animation: pulseFace 1.5s ease-in-out infinite alternate;
        }

        @keyframes pulseFace {
            from { opacity: 0.3; }
            to { opacity: 1; }
        }

        .compass-rose {
            transform-origin: center;
            animation: compassSpin 2s linear infinite;
        }

        @keyframes compassSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .compass-needle {
            fill: var(--champagne-400);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MODULE 5: RESULTS - FULL PAGE DASHBOARD
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #module-results {
            background: var(--parchment-50);
            padding: 80px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            max-width: 1800px;
            margin: 0 auto;
        }

        .results-hero {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 40px;
        }

        .match-score-giant {
            font-size: 180px;
            font-family: 'Cormorant Garamond', serif;
            color: var(--mediterranean-500);
            font-weight: 700;
            line-height: 1;
            margin-bottom: 20px;
        }

        .match-subtitle {
            font-size: 28px;
            color: var(--parchment-900);
            opacity: 0.7;
        }

        /* Charts Section */
        .chart-card {
            background: white;
            border-radius: 16px;
            padding: 50px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }

        .chart-title {
            font-size: 32px;
            font-family: 'Cormorant Garamond', serif;
            color: var(--mediterranean-500);
            margin-bottom: 40px;
        }

        /* Donut Chart */
        .donut-chart-large {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        .donut-segment {
            transition: opacity 0.3s ease;
            cursor: pointer;
        }

        .donut-segment:hover {
            opacity: 0.8;
        }

        .donut-chart-large.isolated .donut-segment {
            opacity: 0.3;
        }

        .donut-chart-large.isolated .donut-segment.active {
            opacity: 1;
        }

        /* Radar Chart */
        .radar-chart-large {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .radar-label {
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .radar-tooltip {
            position: fixed;
            background: rgba(42, 78, 108, 0.95);
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            font-size: 14px;
            max-width: 300px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 1000;
        }

        .radar-tooltip.visible {
            opacity: 1;
        }

        /* Chemical Spark Indicator */
        .spark-indicator {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(197, 160, 40, 0.15));
            border: 2px solid var(--champagne-400);
            border-radius: 16px;
            padding: 40px 60px;
            text-align: center;
        }

        .spark-badge {
            display: inline-block;
            background: var(--champagne-400);
            color: white;
            padding: 12px 32px;
            border-radius: 50px;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .spark-text {
            font-size: 18px;
            color: var(--parchment-900);
            line-height: 1.6;
        }

        /* Profile Cards */
        .profiles-section {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 60px;
        }

        .profile-card {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }

        .profile-name {
            font-size: 36px;
            font-family: 'Cormorant Garamond', serif;
            color: var(--mediterranean-500);
            margin-bottom: 20px;
        }

        .trait-list {
            list-style: none;
        }

        .trait-item {
            font-size: 18px;
            padding: 12px 0;
            border-bottom: 1px solid var(--parchment-200);
        }

        .trait-item:last-child {
            border-bottom: none;
        }

        /* CTA Button */
        .cta-section {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 60px;
        }

        .connect-btn {
            padding: 24px 80px;
            background: var(--mediterranean-500);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 22px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 30px rgba(42, 78, 108, 0.25);
        }

        .connect-btn:hover {
            background: var(--mediterranean-600);
            transform: translateY(-3px);
            box-shadow: 0 10px 40px rgba(42, 78, 108, 0.35);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PARTICLE CANVAS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
    </style>
</head>
<body>

<!-- Particle Canvas -->
<canvas id="particle-canvas"></canvas>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODULE 1: SETUP
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="module-setup" class="module active">
    <div class="full-container">
        <div class="setup-grid">
            <!-- Left: Form -->
            <div class="setup-left">
                <h1>Welcome to<br>Harmonia</h1>
                <p>A scientific instrument for measuring romantic compatibility across three dimensions: visual chemistry, personality resonance, and genetic harmony.</p>

                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="user-name" value="Alex Chen">
                </div>

                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" id="user-email" value="alex.chen@example.com">
                </div>

                <div class="form-group">
                    <label class="form-label">Gender</label>
                    <div class="gender-toggle">
                        <div class="gender-option active" onclick="selectGender('male')">Male</div>
                        <div class="gender-option" onclick="selectGender('female')">Female</div>
                    </div>
                </div>

                <button class="begin-btn" onclick="showModule('calibration')">Begin Assessment</button>
            </div>

            <!-- Right: DNA Upload -->
            <div class="setup-right">
                <div class="dna-seal-large" onclick="simulateDNAUpload()">
                    <div class="seal-fill" id="seal-fill"></div>
                    <div class="dna-icon">ğŸ§¬</div>
                </div>
                <div class="processing-text" id="processing-text"></div>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODULE 2: CALIBRATION
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="module-calibration" class="module">
    <div class="full-container">
        <div class="calibration-header">
            <h2>Visual Preference Calibration</h2>
            <p>Rate your attraction to each image using the slider below</p>
        </div>

        <div class="portrait-display" id="portrait-frame">
            <div id="portrait-image">ğŸ‘¤</div>
        </div>

        <div class="slider-container">
            <div class="slider-labels">
                <span>Indifferent</span>
                <span>Potential</span>
                <span>Magnetic</span>
            </div>
            <div class="slider-track" id="slider-track">
                <div class="slider-thumb" id="slider-thumb"></div>
            </div>
        </div>

        <div class="rating-feedback" id="rating-feedback">Potential</div>
        <div class="calibration-progress" id="calibration-progress">Image 1 of 5</div>
        <button class="next-btn" onclick="nextCalibrationImage()">Next</button>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODULE 3: ASSESSMENT (FELIX QUESTIONS)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="module-assessment" class="module">
    <div class="full-container">
        <div class="assessment-layout">
            <!-- Vertical Progress Tube -->
            <div class="progress-tube-vertical">
                <div class="ink-fill" id="ink-fill"></div>
            </div>

            <!-- Question Panel -->
            <div class="question-panel">
                <div>
                    <div class="driver-header">
                        <div class="driver-icon-large" id="driver-icon">ğŸ”¥</div>
                        <div class="driver-badge" id="driver-badge">PASSION</div>
                    </div>

                    <h3 class="question-title" id="question-title">The Overcrowded Calendar</h3>
                    <p class="question-text" id="question-text">You've accidentally double-booked yourself - a close friend's birthday dinner and a work networking event that could advance your career. How do you handle this?</p>

                    <textarea
                        class="answer-textarea"
                        id="answer-textarea"
                        placeholder="Type your response here..."
                        oninput="updateWordCount()"
                    >I'd reach out to my friend immediately and be completely honest about what happened. I'd explain the situation and ask if we could celebrate together either earlier in the day or the following weekend, making it clear that I want to make it special even if the timing shifted. Then I'd attend the networking event since it was already committed to, but I'd make sure my friend knows they're a priority and that this was genuinely an accident. Building trust through transparency matters more to me than trying to please everyone.</textarea>

                    <div class="word-count" id="word-count">76 words</div>
                </div>

                <button class="submit-answer-btn" onclick="submitAnswer()">Continue</button>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODULE 4: ANALYSIS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="module-analysis" class="module">
    <div class="analysis-theater">
        <div class="stage-visual" id="stage-visual">
            <svg viewBox="0 0 300 300">
                <path class="helix-strand" d="M50,150 Q100,100 150,150 T250,150"/>
                <path class="helix-strand" d="M50,150 Q100,200 150,150 T250,150"/>
                <circle class="hla-band" cx="100" cy="120" r="8"/>
                <circle class="hla-band" cx="150" cy="150" r="8" style="animation-delay: 0.2s"/>
                <circle class="hla-band" cx="200" cy="180" r="8" style="animation-delay: 0.4s"/>
            </svg>
        </div>
        <div class="analysis-text" id="analysis-text">Genomic Sequencing</div>
        <div class="analysis-detail" id="analysis-detail">Parsing Chromosome 6... HLA-A*02:01... MATCH</div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODULE 5: RESULTS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="module-results" class="module">
    <div class="results-grid">
        <!-- Hero Score -->
        <div class="results-hero">
            <div class="match-score-giant">94%</div>
            <div class="match-subtitle">Compatibility Match</div>
        </div>

        <!-- Donut Chart -->
        <div class="chart-card">
            <h3 class="chart-title">Tri-Factor Breakdown</h3>
            <div class="donut-chart-large" id="donut-chart" onclick="toggleDonutIsolation(event)">
                <svg viewBox="0 0 200 200">
                    <circle class="donut-segment" data-component="visual" cx="100" cy="100" r="80" fill="none"
                            stroke="var(--mediterranean-500)" stroke-width="30"
                            stroke-dasharray="251 502" stroke-dashoffset="0"/>
                    <circle class="donut-segment" data-component="psychometric" cx="100" cy="100" r="80" fill="none"
                            stroke="var(--danger-500)" stroke-width="30"
                            stroke-dasharray="176 502" stroke-dashoffset="-251"/>
                    <circle class="donut-segment" data-component="genetic" cx="100" cy="100" r="80" fill="none"
                            stroke="var(--champagne-400)" stroke-width="30"
                            stroke-dasharray="50 502" stroke-dashoffset="-427"/>
                    <text x="100" y="100" text-anchor="middle" dy="0.35em" font-size="28"
                          font-family="Cormorant Garamond" fill="var(--mediterranean-500)">94%</text>
                </svg>
            </div>
            <div style="margin-top: 30px; font-size: 16px; color: var(--parchment-900); opacity: 0.7;">
                <div>ğŸ”µ Visual (50%) â€” Physical attraction</div>
                <div>ğŸ”´ Psychometric (35%) â€” Personality match</div>
                <div>ğŸŸ¡ Genetic (10%) â€” HLA compatibility</div>
            </div>
        </div>

        <!-- Radar Chart -->
        <div class="chart-card">
            <h3 class="chart-title">Seven Drivers Analysis</h3>
            <div class="radar-chart-large">
                <svg viewBox="0 0 300 300">
                    <!-- Background polygon -->
                    <polygon points="150,50 230,100 230,200 150,250 70,200 70,100"
                             fill="rgba(42,78,108,0.05)" stroke="var(--parchment-200)" stroke-width="1"/>

                    <!-- User profile (Blue) -->
                    <polygon points="150,70 210,90 220,180 150,220 90,180 80,90"
                             fill="rgba(42,78,108,0.3)" stroke="var(--mediterranean-500)" stroke-width="2"/>

                    <!-- Match profile (Burgundy) -->
                    <polygon points="150,80 200,110 210,170 150,210 100,170 90,110"
                             fill="rgba(139,0,0,0.3)" stroke="var(--danger-500)" stroke-width="2"/>

                    <!-- Labels -->
                    <text x="150" y="40" text-anchor="middle" class="radar-label"
                          data-trait="passion" onmouseover="showTooltip(event, 'passion')" onmouseout="hideTooltip()">Passion</text>
                    <text x="245" y="100" text-anchor="start" class="radar-label"
                          data-trait="ambition" onmouseover="showTooltip(event, 'ambition')" onmouseout="hideTooltip()">Ambition</text>
                    <text x="245" y="200" text-anchor="start" class="radar-label"
                          data-trait="indulgence" onmouseover="showTooltip(event, 'indulgence')" onmouseout="hideTooltip()">Indulgence</text>
                    <text x="150" y="275" text-anchor="middle" class="radar-label"
                          data-trait="serenity" onmouseover="showTooltip(event, 'serenity')" onmouseout="hideTooltip()">Serenity</text>
                    <text x="55" y="200" text-anchor="end" class="radar-label"
                          data-trait="conviction" onmouseover="showTooltip(event, 'conviction')" onmouseout="hideTooltip()">Conviction</text>
                    <text x="55" y="100" text-anchor="end" class="radar-label"
                          data-trait="dignity" onmouseover="showTooltip(event, 'dignity')" onmouseout="hideTooltip()">Dignity</text>
                </svg>
                <div class="radar-tooltip" id="radar-tooltip"></div>
            </div>
        </div>

        <!-- Chemical Spark Indicator -->
        <div class="spark-indicator">
            <div class="spark-badge">âœ¨ Chemical Spark Detected</div>
            <p class="spark-text">HLA genetic analysis reveals optimal dissimilarity (55%) â€” the biological foundation of chemistry. Your immune system genes are different enough to trigger subconscious attraction, as predicted by the Wedekind T-shirt study.</p>
        </div>

        <!-- Profile Cards -->
        <div class="profiles-section">
            <div class="profile-card">
                <h3 class="profile-name">Alex Chen</h3>
                <ul class="trait-list">
                    <li class="trait-item"><strong>High Ambition:</strong> Career-focused, goal-driven</li>
                    <li class="trait-item"><strong>Moderate Passion:</strong> Balanced intensity</li>
                    <li class="trait-item"><strong>Strong Dignity:</strong> Self-assured leadership</li>
                </ul>
            </div>

            <div class="profile-card">
                <h3 class="profile-name">Jordan Rivera</h3>
                <ul class="trait-list">
                    <li class="trait-item"><strong>High Passion:</strong> Emotional depth, intensity</li>
                    <li class="trait-item"><strong>Moderate Ambition:</strong> Steady progression</li>
                    <li class="trait-item"><strong>Strong Serenity:</strong> Calm, reflective nature</li>
                </ul>
            </div>
        </div>

        <!-- CTA -->
        <div class="cta-section">
            <button class="connect-btn">Initiate Connection Protocol</button>
        </div>
    </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CANVAS PARTICLE SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const canvas = document.getElementById('particle-canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

class Particle {
    constructor(x, y, type = 'gold') {
        this.x = x;
        this.y = y;
        this.vx = (Math.random() - 0.5) * 4;
        this.vy = -Math.random() * 5 - 3;
        this.life = 1;
        this.decay = Math.random() * 0.02 + 0.01;
        this.size = Math.random() * 5 + 3;
        this.type = type;
    }

    update() {
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.08; // gravity
        this.life -= this.decay;
    }

    draw() {
        ctx.save();
        ctx.globalAlpha = this.life;
        ctx.fillStyle = this.type === 'gold' ? '#d4af37' : '#d4af37';
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
    }
}

const particles = [];

function animateParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let i = particles.length - 1; i >= 0; i--) {
        particles[i].update();
        particles[i].draw();

        if (particles[i].life <= 0) {
            particles.splice(i, 1);
        }
    }

    requestAnimationFrame(animateParticles);
}
animateParticles();

function createGoldDust(x, y, count = 40) {
    for (let i = 0; i < count; i++) {
        particles.push(new Particle(x, y, 'gold'));
    }
}

function createExplosion(x, y) {
    for (let i = 0; i < 200; i++) {
        const angle = (Math.PI * 2 * i) / 200;
        const speed = Math.random() * 10 + 5;
        const particle = new Particle(x, y, 'gold');
        particle.vx = Math.cos(angle) * speed;
        particle.vy = Math.sin(angle) * speed;
        particles.push(particle);
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODULE NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showModule(moduleId) {
    document.querySelectorAll('.module').forEach(m => m.classList.remove('active'));
    document.getElementById('module-' + moduleId).classList.add('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODULE 1: DNA UPLOAD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let selectedGender = 'male';

function selectGender(gender) {
    selectedGender = gender;
    document.querySelectorAll('.gender-option').forEach(opt => opt.classList.remove('active'));
    event.target.classList.add('active');
}

function simulateDNAUpload() {
    const fill = document.getElementById('seal-fill');
    const text = document.getElementById('processing-text');
    fill.classList.add('filling');

    const stages = [
        'Detecting File Format (23andMe/Ancestry)...',
        'Parsing Chromosome 6 Region...',
        'Validating 1,000+ SNP Markers...',
        'Imputing HLA-A, B, DRB1 Alleles...',
        'âœ“ Biometric Data Ingested'
    ];

    let i = 0;
    const interval = setInterval(() => {
        if (i < stages.length) {
            text.textContent = stages[i];
            createGoldDust(window.innerWidth / 2, window.innerHeight / 2, 20);
            i++;
        } else {
            clearInterval(interval);
        }
    }, 600);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODULE 2: CALIBRATION WITH SPRING PHYSICS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let calibrationIndex = 0;
const calibrationImages = ['ğŸ‘¤', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ§‘', 'ğŸ‘±'];
let sliderPosition = 50;
let sliderVelocity = 0;
let sliderDragging = false;

function initSlider() {
    const track = document.getElementById('slider-track');
    const thumb = document.getElementById('slider-thumb');

    thumb.addEventListener('mousedown', () => {
        sliderDragging = true;
    });

    document.addEventListener('mouseup', () => {
        sliderDragging = false;
    });

    document.addEventListener('mousemove', (e) => {
        if (sliderDragging) {
            const rect = track.getBoundingClientRect();
            const x = e.clientX - rect.left;
            sliderPosition = Math.max(0, Math.min(100, (x / rect.width) * 100));
            updateSliderVisuals();
        }
    });

    track.addEventListener('click', (e) => {
        const rect = track.getBoundingClientRect();
        const x = e.clientX - rect.left;
        sliderPosition = (x / rect.width) * 100;
        updateSliderVisuals();
    });

    // Spring physics animation loop
    setInterval(() => {
        if (!sliderDragging) {
            updateSliderVisuals();
        }
    }, 16);
}

function updateSliderVisuals() {
    const thumb = document.getElementById('slider-thumb');
    const frame = document.getElementById('portrait-frame');
    const feedback = document.getElementById('rating-feedback');

    // Spring physics damping
    if (!sliderDragging) {
        const target = sliderPosition;
        const current = parseFloat(thumb.style.left) || 50;
        const diff = target - current;
        sliderVelocity = diff * 0.1;
        sliderPosition = current + sliderVelocity;
    }

    thumb.style.left = sliderPosition + '%';

    const rating = Math.round((sliderPosition / 100) * 5);

    frame.className = 'portrait-display';
    feedback.className = 'rating-feedback';

    if (rating <= 2) {
        frame.classList.add('indifferent');
        feedback.classList.add('indifferent');
        feedback.textContent = 'Indifferent';
    } else if (rating === 3) {
        feedback.classList.add('potential');
        feedback.textContent = 'Potential';
    } else {
        frame.classList.add('magnetic');
        feedback.classList.add('magnetic');
        feedback.textContent = 'Magnetic';
    }
}

function nextCalibrationImage() {
    calibrationIndex++;
    if (calibrationIndex < calibrationImages.length) {
        document.getElementById('portrait-image').textContent = calibrationImages[calibrationIndex];
        document.getElementById('calibration-progress').textContent = `Image ${calibrationIndex + 1} of ${calibrationImages.length}`;
        sliderPosition = 50;
        updateSliderVisuals();
    } else {
        showModule('assessment');
        updateQuestion();
    }
}

initSlider();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODULE 3: ASSESSMENT WITH FELIX QUESTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const felixQuestions = [
    {
        driver: 'Passion',
        icon: 'ğŸ”¥',
        title: 'The Overcrowded Calendar',
        question: "You've accidentally double-booked yourself - a close friend's birthday dinner and a work networking event that could advance your career. How do you handle this?",
        prefilled: "I'd reach out to my friend immediately and be completely honest about what happened. I'd explain the situation and ask if we could celebrate together either earlier in the day or the following weekend, making it clear that I want to make it special even if the timing shifted. Then I'd attend the networking event since it was already committed to, but I'd make sure my friend knows they're a priority and that this was genuinely an accident. Building trust through transparency matters more to me than trying to please everyone."
    },
    {
        driver: 'Conviction',
        icon: 'âš”ï¸',
        title: 'The Technology Meltdown',
        question: "Your computer crashes right before a major deadline, and you haven't saved your work in hours. Walk me through your reaction and recovery.",
        prefilled: "I'd take a deep breath first because panicking won't help. Then I'd immediately try to recover any auto-saved versions or temporary files. If that fails, I'd contact whoever set the deadline, explain what happened honestly, and propose a realistic new timeline. I'd use this as a forcing function to rebuild the work even better than before since I now know the structure. This kind of situation reminds me why I need better backup systems, so I'd implement automatic cloud saving going forward to prevent this from happening again."
    },
    {
        driver: 'Serenity',
        icon: 'ğŸŒŠ',
        title: 'The Weekend Off',
        question: "You have a completely free weekend with no obligations. How do you spend it?",
        prefilled: "I'd probably spend Saturday morning sleeping in and then doing something active like a long walk or bike ride to clear my head. The afternoon would be perfect for reading or working on a personal project I've been neglecting. Sunday I'd see if any friends are free for brunch or coffee, but I'd also protect some time to just exist without a planâ€”maybe cook something elaborate, watch a movie, or just sit outside. Having that mix of activity and genuine rest is what actually recharges me rather than packing the weekend full."
    },
    {
        driver: 'Ambition',
        icon: 'ğŸ‘‘',
        title: 'The Restaurant Choice',
        question: "You're excited about trying a new restaurant, but your date suggests somewhere you've been to multiple times and found mediocre. How do you respond?",
        prefilled: "I'd be honest but light about it: 'I've actually been there a few times and it didn't totally land for me, but I'm curious why you're drawn to it?' Maybe they have a specific dish recommendation or a good memory associated with the place that would change my perspective. If they're set on it, I'd suggest we try their place this time and mine next time, so we both get to share something we're excited about. The goal is finding something we'd both enjoy, not winning the decision."
    },
    {
        driver: 'Dignity',
        icon: 'ğŸ¦š',
        title: 'The Friend Crisis',
        question: "Your best friend calls with an emergency the same night as a planned date you've been looking forward to. What's your thinking process?",
        prefilled: "I'd first ask my friend what's actually happening to gauge the severityâ€”'emergency' means different things to different people. If it's truly urgent and they need support right now, I'd call my date immediately, explain the situation honestly, and ask if we could reschedule. Most people understand that friendship emergencies happen. If the situation is serious but not immediate, I might see if I can help my friend before or after the date. The key is not leaving anyone in the dark and being honest about what I can realistically do."
    }
];

let questionIndex = 0;

function updateQuestion() {
    if (questionIndex < felixQuestions.length) {
        const q = felixQuestions[questionIndex];
        document.getElementById('driver-icon').textContent = q.icon;
        document.getElementById('driver-badge').textContent = q.driver.toUpperCase();
        document.getElementById('question-title').textContent = q.title;
        document.getElementById('question-text').textContent = q.question;
        document.getElementById('answer-textarea').value = q.prefilled;

        // Update ink fill
        const progressPercent = ((questionIndex + 1) / felixQuestions.length) * 100;
        document.getElementById('ink-fill').style.height = progressPercent + '%';

        updateWordCount();
    }
}

function updateWordCount() {
    const textarea = document.getElementById('answer-textarea');
    const words = textarea.value.trim().split(/\s+/).filter(w => w.length > 0).length;
    document.getElementById('word-count').textContent = words + ' words';
}

function submitAnswer() {
    const panel = document.querySelector('.question-panel');
    const rect = panel.getBoundingClientRect();
    createGoldDust(rect.left + rect.width / 2, rect.top + rect.height / 2, 60);

    questionIndex++;

    setTimeout(() => {
        if (questionIndex < felixQuestions.length) {
            updateQuestion();
        } else {
            startAnalysis();
        }
    }, 300);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODULE 4: ANALYSIS THEATER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startAnalysis() {
    showModule('analysis');

    const stages = [
        {
            name: 'genomic',
            svg: `<svg viewBox="0 0 300 300"><path class="helix-strand" d="M50,150 Q100,100 150,150 T250,150"/><path class="helix-strand" d="M50,150 Q100,200 150,150 T250,150"/><circle class="hla-band" cx="100" cy="120" r="8"/><circle class="hla-band" cx="150" cy="150" r="8" style="animation-delay: 0.2s"/><circle class="hla-band" cx="200" cy="180" r="8" style="animation-delay: 0.4s"/></svg>`,
            text: 'Genomic Sequencing',
            detail: 'Parsing Chromosome 6... HLA-A*02:01... MATCH',
            duration: 1500
        },
        {
            name: 'visual',
            svg: `<svg viewBox="0 0 300 300"><circle class="face-mesh-line" cx="150" cy="100" r="60"/><circle class="face-mesh-line" cx="120" cy="110" r="15"/><circle class="face-mesh-line" cx="180" cy="110" r="15"/><path class="face-mesh-line" stroke-linecap="round" d="M120,180 Q150,200 180,180"/><line class="face-mesh-line" x1="100" y1="80" x2="140" y2="85"/><line class="face-mesh-line" x1="160" y1="85" x2="200" y2="80"/></svg>`,
            text: 'Visual Calibration',
            detail: 'Triangulating Meta FP Vector... Calibrating Symmetry...',
            duration: 1500
        },
        {
            name: 'psychometric',
            svg: `<svg viewBox="0 0 300 300"><g class="compass-rose"><circle cx="150" cy="150" r="80" fill="none" stroke="var(--champagne-400)" stroke-width="2"/><polygon class="compass-needle" points="150,70 160,150 150,230 140,150"/><line x1="150" y1="70" x2="150" y2="230" stroke="white" stroke-width="1"/><line x1="70" y1="150" x2="230" y2="150" stroke="white" stroke-width="1"/></g></svg>`,
            text: 'Psychometric Triangulation',
            detail: 'Cross-referencing Driver Matrix... Seeking Complementarity...',
            duration: 1500
        },
        {
            name: 'synthesis',
            svg: `<svg viewBox="0 0 300 300"><circle cx="150" cy="150" r="20" fill="var(--champagne-400)" opacity="0.8"><animate attributeName="r" from="20" to="5" dur="0.5s" repeatCount="1"/><animate attributeName="opacity" from="0.8" to="1" dur="0.5s" repeatCount="1"/></circle></svg>`,
            text: 'Synthesis Complete',
            detail: 'Generating Compatibility Report...',
            duration: 500
        }
    ];

    let currentStage = 0;

    function nextStage() {
        if (currentStage < stages.length) {
            const stage = stages[currentStage];
            document.getElementById('stage-visual').innerHTML = stage.svg;
            document.getElementById('analysis-text').textContent = stage.text;
            document.getElementById('analysis-detail').textContent = stage.detail;

            if (currentStage === stages.length - 1) {
                setTimeout(() => {
                    createExplosion(window.innerWidth / 2, window.innerHeight / 2);
                }, 250);
            }

            currentStage++;
            setTimeout(nextStage, stage.duration);
        } else {
            setTimeout(() => showModule('results'), 500);
        }
    }

    nextStage();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODULE 5: INTERACTIVE CHARTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleDonutIsolation(event) {
    const chart = document.getElementById('donut-chart');
    const target = event.target;

    if (target.classList.contains('donut-segment')) {
        if (chart.classList.contains('isolated')) {
            chart.classList.remove('isolated');
            document.querySelectorAll('.donut-segment').forEach(s => s.classList.remove('active'));
        } else {
            chart.classList.add('isolated');
            target.classList.add('active');
        }
    } else {
        chart.classList.remove('isolated');
        document.querySelectorAll('.donut-segment').forEach(s => s.classList.remove('active'));
    }
}

const traitInsights = {
    passion: "Your high Passion complements their moderate Serenity, creating a dynamic of 'Intensity and Calm'.",
    ambition: "Your high Ambition aligns with their moderate Ambition - shared drive with different pacing.",
    indulgence: "Balanced Indulgence scores suggest similar approaches to pleasure and self-care.",
    serenity: "Their strong Serenity provides grounding for your more driven nature.",
    conviction: "Moderate Conviction levels indicate thoughtful disagreement resolution.",
    dignity: "High Dignity in both profiles suggests mutual respect and self-assuredness."
};

function showTooltip(event, trait) {
    const tooltip = document.getElementById('radar-tooltip');
    tooltip.textContent = traitInsights[trait] || 'Complementary trait alignment';
    tooltip.style.left = event.clientX + 'px';
    tooltip.style.top = (event.clientY - 50) + 'px';
    tooltip.classList.add('visible');
}

function hideTooltip() {
    const tooltip = document.getElementById('radar-tooltip');
    tooltip.classList.remove('visible');
}
</script>

</body>
</html>
