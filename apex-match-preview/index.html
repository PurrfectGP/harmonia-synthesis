<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harmonia Apex Match - Full Preview</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Core CSS -->
    <link rel="stylesheet" href="css/1-variables.css">
    <link rel="stylesheet" href="css/2-reset.css">
    <link rel="stylesheet" href="css/3-base.css">
    <link rel="stylesheet" href="css/4-layout.css">

    <!-- Module CSS (Session 2) -->
    <link rel="stylesheet" href="css/5-modules.css">
    <link rel="stylesheet" href="css/6-animations.css">
    <link rel="stylesheet" href="css/7-components.css">

    <style>
        /* Preview Navigation */
        .preview-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--mediterranean-500);
            color: var(--parchment-50);
            padding: 1rem 2rem;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .preview-nav h1 {
            font-family: var(--font-display);
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .preview-nav-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .preview-nav button {
            padding: 0.5rem 1rem;
            background: var(--champagne-400);
            color: var(--parchment-900);
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .preview-nav button:hover {
            background: var(--champagne-500);
            transform: translateY(-1px);
        }

        .preview-nav button.active {
            background: var(--parchment-100);
            color: var(--mediterranean-500);
            font-weight: 600;
        }

        .preview-content {
            margin-top: 120px;
            min-height: calc(100vh - 120px);
        }

        .module-container {
            display: none;
        }

        .module-container.active {
            display: block;
        }

        /* Override module positioning for preview */
        .module-setup,
        .module-calibration,
        .module-assessment,
        .module-analysis,
        .module-results {
            padding: 2rem;
            min-height: calc(100vh - 120px);
        }

        /* Preview Info Banner */
        .preview-info {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid var(--champagne-400);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin: 2rem;
            font-family: var(--font-body);
            font-size: 0.875rem;
            color: var(--parchment-900);
        }

        .preview-info strong {
            color: var(--mediterranean-500);
        }
    </style>
</head>
<body>
    <!-- Screen Reader Announcements -->
    <div id="route-announcer" role="status" aria-live="polite" aria-atomic="true" style="position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden;"></div>

    <!-- Preview Navigation -->
    <nav class="preview-nav">
        <h1>Harmonia Apex Match - Full System Preview</h1>
        <div class="preview-nav-buttons">
            <button onclick="showModule('setup')" class="active" data-module="setup">
                Module 1: Setup
            </button>
            <button onclick="showModule('calibration')" data-module="calibration">
                Module 2: Calibration
            </button>
            <button onclick="showModule('assessment')" data-module="assessment">
                Module 3: Assessment
            </button>
            <button onclick="showModule('analysis')" data-module="analysis">
                Module 4: Analysis
            </button>
            <button onclick="showModule('results')" data-module="results">
                Module 5: Results
            </button>
        </div>
    </nav>

    <!-- Preview Content Area -->
    <div class="preview-content">

        <!-- Module 1: Setup -->
        <div id="module-setup" class="module-container active">
            <div class="preview-info">
                <strong>Module 1: Setup (Biometric Ingestion & Onboarding)</strong><br>
                This module handles user registration, the "Mandatory Five" baseline questions, and DNA data upload via the Biometric Seal.
                Note: Interactive components (floating inputs, segmented controls) require JavaScript initialization.
            </div>

            <!-- Load Module 1 Content -->
            <section class="module-setup" id="module-setup-section" data-module="setup" data-step="1" aria-labelledby="setup-title">
                <!-- Setup Card - "Concierge" Style -->
                <div class="setup-card" role="main">
                    <!-- Title & Subtitle -->
                    <h1 class="setup-title" id="setup-title">The Harmonia Protocol</h1>
                    <p class="setup-subtitle">
                        A scientific approach to meaningful connection.
                        This rigorous process ensures high-quality matches based on visual preference, psychological resonance, and biological compatibility.
                    </p>

                    <!-- Progress Indicator - "Ink Well" Style -->
                    <div class="setup-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Setup progress">
                        <div class="setup-progress-fill" style="width: 0%;"></div>
                    </div>

                    <!-- Basic Information Form -->
                    <form id="setup-form" aria-label="Account setup form" data-form-section="basic-info">
                        <!-- Name Input (Floating Label) -->
                        <div id="input-name-container" aria-label="Full name field"></div>

                        <!-- Email Input (Floating Label) -->
                        <div id="input-email-container" aria-label="Email address field"></div>

                        <!-- Password Input (Floating Label) -->
                        <div id="input-password-container" aria-label="Password field"></div>

                        <!-- Gender Selection (Segmented Control) -->
                        <div class="setup-field-group" style="margin: 2.5rem 0;">
                            <label class="setup-seal-label" for="gender-control-container">
                                Gender
                            </label>
                            <div id="gender-control-container" aria-label="Gender selection"></div>
                        </div>

                        <!-- Seeking Preference (Segmented Control) -->
                        <div class="setup-field-group" style="margin: 2.5rem 0;">
                            <label class="setup-seal-label" for="seeking-control-container">
                                Seeking
                            </label>
                            <div id="seeking-control-container" aria-label="Seeking preference"></div>
                        </div>
                    </form>

                    <!-- Mandatory Five Inquiry Section -->
                    <section class="setup-mandatory-inquiry" data-section="mandatory-five" aria-labelledby="inquiry-title">
                        <h2 class="setup-inquiry-title" id="inquiry-title">The Mandatory Five</h2>
                        <p class="setup-subtitle" style="margin-bottom: 2rem;">
                            Answer these five foundational questions to establish your baseline psychometric profile.
                        </p>

                        <!-- Question Cards Container -->
                        <div id="mandatory-questions-container" role="list" aria-label="Five mandatory questions">
                            <!-- Questions will be dynamically inserted here -->
                        </div>
                    </section>

                    <!-- Biometric Ingestion Section -->
                    <section class="setup-biometric-seal-container" data-section="biometric" aria-labelledby="biometric-title">
                        <h2 class="setup-inquiry-title" id="biometric-title">Biometric Ingestion</h2>
                        <p class="setup-subtitle" style="margin-bottom: 2rem;">
                            Upload your genetic data (23andMe, Ancestry) or request a testing kit.
                            HLA compatibility accounts for 10% of your match score.
                        </p>

                        <label class="setup-seal-label" for="biometric-seal-element">
                            DNA Data Upload
                        </label>

                        <!-- Biometric Seal Component -->
                        <div id="biometric-seal-element" aria-label="DNA file upload area"></div>

                        <!-- Alternative: Request Kit Button -->
                        <button
                            type="button"
                            class="btn btn-secondary"
                            id="request-kit-btn"
                            aria-label="Request DNA testing kit"
                            style="margin-top: 1.5rem; width: 100%;"
                        >
                            Request DNA Testing Kit
                        </button>

                        <!-- Kit Request Status -->
                        <div id="kit-request-status" role="status" aria-live="polite" style="margin-top: 1rem; display: none;">
                            <!-- Status message will be inserted here -->
                        </div>
                    </section>

                    <!-- Continue Button -->
                    <button
                        type="button"
                        class="btn btn-primary"
                        id="continue-to-calibration"
                        aria-label="Continue to calibration"
                        style="width: 100%; margin-top: 3rem;"
                        disabled
                        onclick="showModule('calibration')"
                    >
                        Continue to Calibration
                    </button>
                </div>
            </section>

            <!-- Template: Mandatory Question Card -->
            <template id="question-card-template">
                <article class="setup-question-card" role="listitem" data-question="">
                    <h3 class="setup-question-text"></h3>
                    <div class="setup-question-choices">
                        <button class="assessment-choice-btn" data-choice="A"></button>
                        <button class="assessment-choice-btn" data-choice="B"></button>
                    </div>
                </article>
            </template>
        </div>

        <!-- Module 2: Calibration -->
        <div id="module-calibration" class="module-container">
            <div class="preview-info">
                <strong>Module 2: Calibration (The Meta FP Engine)</strong><br>
                This module trains the visual preference algorithm using a 5-point slider. Track dwell time and decision velocity for implicit signals.
                The "golden hour glow" effect activates for ratings of 4-5 (Magnetic).
            </div>

            <section class="module-calibration" id="module-calibration-section" data-module="calibration" data-step="2" aria-labelledby="calibration-title">
                <div class="calibration-gallery">
                    <!-- Title (Hidden visually but available to screen readers) -->
                    <h1 class="sr-only" id="calibration-title">Visual Calibration - Portrait Gallery</h1>

                    <div class="calibration-instructions" style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="font-family: var(--font-display); font-size: 1.75rem; color: var(--mediterranean-500); margin-bottom: 0.5rem;">
                            The Portrait Gallery
                        </h2>
                        <p style="font-family: var(--font-body); color: var(--parchment-900); opacity: 0.8;">
                            Rate each portrait based on your instinctive visual preference.
                            This calibration establishes your baseline aesthetic pattern (50% of match score).
                        </p>
                    </div>

                    <!-- Portrait Frame Container -->
                    <article
                        class="calibration-portrait-frame"
                        id="portrait-frame"
                        data-portrait-index="0"
                        data-portrait-type="stock"
                        data-portrait-id=""
                        data-dwell-start=""
                        role="img"
                        aria-labelledby="portrait-description"
                    >
                        <!-- Portrait Image -->
                        <img
                            id="portrait-image"
                            class="calibration-portrait-image"
                            src=""
                            alt=""
                            aria-describedby="portrait-description"
                        />

                        <!-- Visually hidden description for screen readers -->
                        <div id="portrait-description" class="sr-only"></div>
                    </article>

                    <!-- Rating Slider Section -->
                    <section class="calibration-rating" aria-labelledby="rating-label">
                        <label id="rating-label" class="calibration-rating-label">
                            Rate Your Attraction
                        </label>

                        <!-- Custom Range Slider -->
                        <input
                            type="range"
                            id="calibration-slider"
                            class="custom-slider"
                            min="1"
                            max="5"
                            value="3"
                            step="1"
                            role="slider"
                            aria-valuemin="1"
                            aria-valuemax="5"
                            aria-valuenow="3"
                            aria-valuetext="Potential"
                            aria-label="Rate portrait from 1 to 5"
                        />

                        <!-- Slider Labels -->
                        <div class="calibration-slider-labels" style="display: flex; justify-content: space-between; margin-top: 0.5rem;">
                            <span style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">1</span>
                            <span style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">2</span>
                            <span style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">3</span>
                            <span style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">4</span>
                            <span style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">5</span>
                        </div>

                        <!-- Feedback Text -->
                        <div
                            id="calibration-feedback"
                            class="calibration-feedback potential"
                            role="status"
                            aria-live="polite"
                        >
                            Potential
                        </div>

                        <!-- Submit Rating Button -->
                        <button
                            type="button"
                            id="submit-rating-btn"
                            class="btn btn-primary"
                            style="width: 100%; margin-top: 1.5rem;"
                            aria-label="Submit rating and continue to next portrait"
                        >
                            Continue
                        </button>
                    </section>

                    <!-- Progress Counter -->
                    <div class="calibration-progress-counter" role="status" aria-live="polite" aria-atomic="true">
                        <span id="current-portrait">1</span> of <span id="total-portraits">50</span> portraits
                    </div>

                    <!-- Skip Button (accessibility feature) -->
                    <button
                        type="button"
                        id="skip-portrait-btn"
                        class="btn btn-secondary"
                        style="width: 100%; margin-top: 1rem;"
                        aria-label="Skip this portrait"
                        onclick="showModule('assessment')"
                    >
                        Skip to Assessment
                    </button>
                </div>
            </section>
        </div>

        <!-- Module 3: Assessment -->
        <div id="module-assessment" class="module-container">
            <div class="preview-info">
                <strong>Module 3: Assessment (The Cardinal Drivers)</strong><br>
                This module measures the 7 personality dimensions (Passion, Indulgence, Ambition, Serenity, Conviction, Yearning, Dignity).
                The vertical glass tube fills with blue "ink" as you progress. Cards dissolve into gold dust particles.
            </div>

            <section class="module-assessment" id="module-assessment-section" data-module="assessment" data-step="3" aria-labelledby="assessment-title">
                <div class="assessment-container">
                    <!-- Title (Hidden visually but available to screen readers) -->
                    <h1 class="sr-only" id="assessment-title">Psychometric Assessment - The Inquiry Deck</h1>

                    <div class="assessment-instructions" style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="font-family: var(--font-display); font-size: 1.75rem; color: var(--mediterranean-500); margin-bottom: 0.5rem;">
                            The Inquiry Deck
                        </h2>
                        <p style="font-family: var(--font-body); color: var(--parchment-900); opacity: 0.8;">
                            Answer each question based on your authentic preferences.
                            This assessment maps your personality across 7 Cardinal Drivers (35% of match score).
                        </p>
                    </div>

                    <!-- Assessment Layout: Card Stack (left) + Progress Tube (right) -->
                    <div class="assessment-layout" style="display: flex; gap: 2rem; align-items: stretch;">

                        <!-- Card Stack Area -->
                        <div class="assessment-card-area" style="flex: 1;">
                            <!-- Active Question Card -->
                            <article
                                class="assessment-card"
                                id="assessment-card"
                                data-question-index="0"
                                data-cardinal-driver=""
                                data-question-id=""
                                role="region"
                                aria-labelledby="current-question-text"
                            >
                                <!-- Cardinal Driver Icon Watermark (Behind Text) -->
                                <div class="assessment-card-watermark" id="card-watermark" aria-hidden="true">
                                    <!-- SVG icon injected dynamically based on Cardinal Driver -->
                                    <svg class="cardinal-icon" width="200" height="200" viewBox="0 0 200 200">
                                        <!-- Icon content loaded dynamically -->
                                    </svg>
                                </div>

                                <!-- Question Text -->
                                <h3 class="assessment-question-text" id="current-question-text">
                                    <!-- Question text inserted dynamically -->
                                </h3>

                                <!-- Binary Choice Buttons (A vs B) -->
                                <div class="assessment-choices" role="group" aria-labelledby="current-question-text">
                                    <button
                                        type="button"
                                        class="assessment-choice-btn"
                                        id="choice-a"
                                        data-choice="A"
                                        aria-label="Choice A"
                                    >
                                        <!-- Choice A text inserted dynamically -->
                                    </button>

                                    <button
                                        type="button"
                                        class="assessment-choice-btn"
                                        id="choice-b"
                                        data-choice="B"
                                        aria-label="Choice B"
                                    >
                                        <!-- Choice B text inserted dynamically -->
                                    </button>
                                </div>

                                <!-- Particle Container for Gold Dust Effect -->
                                <div class="assessment-particles" id="card-particles" aria-hidden="true"></div>
                            </article>

                            <!-- Card Stack Hint (shows depth illusion) -->
                            <div class="assessment-card-stack-hint" aria-hidden="true">
                                <div class="stack-card-2"></div>
                                <div class="stack-card-3"></div>
                            </div>
                        </div>

                        <!-- Vertical Progress Tube (Right Side) -->
                        <aside class="assessment-progress-tube" aria-labelledby="progress-tube-label">
                            <div class="sr-only" id="progress-tube-label">Assessment Progress</div>

                            <!-- Glass Tube Container -->
                            <div class="progress-tube-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Assessment progress">
                                <!-- Liquid Fill (animates upward as questions are answered) -->
                                <div class="progress-tube-liquid" id="progress-liquid" style="height: 0%;"></div>

                                <!-- Measurement Markers -->
                                <div class="progress-tube-markers" aria-hidden="true">
                                    <span class="tube-marker" style="bottom: 0%;">0</span>
                                    <span class="tube-marker" style="bottom: 25%;">25</span>
                                    <span class="tube-marker" style="bottom: 50%;">50</span>
                                    <span class="tube-marker" style="bottom: 75%;">75</span>
                                    <span class="tube-marker" style="bottom: 100%;">100</span>
                                </div>

                                <!-- Bubble Animation (Optional) -->
                                <div class="progress-tube-bubbles" aria-hidden="true"></div>
                            </div>

                            <!-- Progress Text -->
                            <div class="progress-tube-text" role="status" aria-live="polite" aria-atomic="true">
                                <span id="current-question-num">1</span> of <span id="total-questions">7</span> questions
                            </div>
                        </aside>
                    </div>

                    <!-- Continue Button (For preview navigation) -->
                    <button
                        type="button"
                        class="btn btn-primary"
                        style="width: 100%; margin-top: 3rem; max-width: 600px; display: block; margin-left: auto; margin-right: auto;"
                        onclick="showModule('analysis')"
                    >
                        Continue to Analysis
                    </button>
                </div>
            </section>
        </div>

        <!-- Module 4: Analysis -->
        <div id="module-analysis" class="module-container">
            <div class="preview-info">
                <strong>Module 4: Analysis (The Labor Illusion Theater)</strong><br>
                This 5-second staged sequence shows the system "working" to find your match. Four layers animate sequentially: DNA helix, radar sweep, chromosome map, and particle synthesis.
                Click the button below to see the animation sequence.
            </div>

            <section class="module-analysis" id="module-analysis-section" data-module="analysis" data-step="4" aria-labelledby="analysis-title">
                <div class="analysis-theater">
                    <!-- Title (Hidden visually but available to screen readers) -->
                    <h1 class="sr-only" id="analysis-title">Analyzing Your Match Results</h1>

                    <!-- Analysis Stage Container -->
                    <div class="analysis-stage" role="status" aria-live="polite" aria-atomic="true">

                        <!-- Central Spotlight Area -->
                        <div class="analysis-spotlight" id="analysis-spotlight">

                            <!-- Layer 1: Visual Pattern Analysis (DNA Helix) -->
                            <div class="analysis-layer" id="layer-visual" data-layer="visual" data-stage="1" aria-hidden="true">
                                <div class="layer-visual-content">
                                    <!-- DNA Helix Visualization -->
                                    <div class="dna-helix-container">
                                        <svg class="dna-helix" width="200" height="300" viewBox="0 0 200 300" aria-hidden="true">
                                            <!-- DNA double helix structure -->
                                            <g class="helix-strand-1">
                                                <path d="M50 0 Q50 75 100 150 T50 300" stroke="var(--champagne-500)" stroke-width="3" fill="none" />
                                            </g>
                                            <g class="helix-strand-2">
                                                <path d="M150 0 Q150 75 100 150 T150 300" stroke="var(--mediterranean-500)" stroke-width="3" fill="none" />
                                            </g>
                                            <!-- Base pairs (rungs) -->
                                            <g class="helix-rungs">
                                                <line x1="50" y1="30" x2="150" y2="30" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="60" y1="60" x2="140" y2="60" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="70" y1="90" x2="130" y2="90" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="80" y1="120" x2="120" y2="120" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="90" y1="150" x2="110" y2="150" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="80" y1="180" x2="120" y2="180" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="70" y1="210" x2="130" y2="210" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="60" y1="240" x2="140" y2="240" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                                <line x1="50" y1="270" x2="150" y2="270" stroke="rgba(212, 175, 55, 0.3)" stroke-width="2" />
                                            </g>
                                        </svg>
                                    </div>
                                    <div class="layer-label">Analyzing Visual Patterns</div>
                                </div>
                            </div>

                            <!-- Layer 2: Psychometric Alignment (Radar Scan) -->
                            <div class="analysis-layer" id="layer-psychometric" data-layer="psychometric" data-stage="2" aria-hidden="true">
                                <div class="layer-psychometric-content">
                                    <!-- Radar Sweep Visualization (simplified) -->
                                    <div class="radar-container">
                                        <svg class="radar-sweep" width="250" height="250" viewBox="0 0 250 250" aria-hidden="true">
                                            <!-- Radar circles -->
                                            <circle cx="125" cy="125" r="100" stroke="var(--champagne-500)" stroke-width="1" fill="none" opacity="0.3" />
                                            <circle cx="125" cy="125" r="75" stroke="var(--champagne-500)" stroke-width="1" fill="none" opacity="0.3" />
                                            <circle cx="125" cy="125" r="50" stroke="var(--champagne-500)" stroke-width="1" fill="none" opacity="0.3" />
                                            <circle cx="125" cy="125" r="25" stroke="var(--champagne-500)" stroke-width="1" fill="none" opacity="0.3" />
                                        </svg>
                                    </div>
                                    <div class="layer-label">Computing Psychometric Alignment</div>
                                </div>
                            </div>

                            <!-- Layer 3: Genetic Compatibility (Chromosome Map) -->
                            <div class="analysis-layer" id="layer-genetic" data-layer="genetic" data-stage="3" aria-hidden="true">
                                <div class="layer-genetic-content">
                                    <!-- Chromosome Visualization (simplified) -->
                                    <div class="chromosome-container">
                                        <svg class="chromosome-map" width="300" height="200" viewBox="0 0 300 200" aria-hidden="true">
                                            <!-- HLA Chromosome pair -->
                                            <g class="chromosome-pair">
                                                <!-- Chromosome 1 -->
                                                <rect x="80" y="50" width="30" height="100" rx="15" fill="var(--champagne-400)" opacity="0.6" />
                                                <!-- Chromosome 2 -->
                                                <rect x="190" y="50" width="30" height="100" rx="15" fill="var(--champagne-400)" opacity="0.6" />
                                            </g>
                                        </svg>
                                    </div>
                                    <div class="layer-label">Processing Genetic Compatibility</div>
                                </div>
                            </div>

                            <!-- Layer 4: Synthesis (Particle Convergence) -->
                            <div class="analysis-layer" id="layer-synthesis" data-layer="synthesis" data-stage="4" aria-hidden="true">
                                <div class="layer-synthesis-content">
                                    <!-- Particle Synthesis Visualization -->
                                    <div class="synthesis-container">
                                        <div class="particle-field" id="synthesis-particles" aria-hidden="true">
                                            <!-- Particles generated dynamically by JavaScript -->
                                        </div>
                                        <!-- Central convergence point -->
                                        <div class="synthesis-core"></div>
                                    </div>
                                    <div class="layer-label">Synthesizing Final Results</div>
                                </div>
                            </div>

                        </div>

                        <!-- Progress Indicator (Bottom) -->
                        <div class="analysis-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Analysis progress">
                            <!-- Circular Progress Ring -->
                            <svg class="progress-ring" width="120" height="120" aria-hidden="true">
                                <circle
                                    class="progress-ring-bg"
                                    cx="60"
                                    cy="60"
                                    r="50"
                                    stroke="rgba(212, 175, 55, 0.2)"
                                    stroke-width="8"
                                    fill="none"
                                />
                                <circle
                                    id="progress-ring-fill"
                                    class="progress-ring-fill"
                                    cx="60"
                                    cy="60"
                                    r="50"
                                    stroke="var(--champagne-500)"
                                    stroke-width="8"
                                    fill="none"
                                    stroke-linecap="round"
                                    stroke-dasharray="314.159"
                                    stroke-dashoffset="314.159"
                                    style="transform: rotate(-90deg); transform-origin: center;"
                                />
                            </svg>

                            <!-- Percentage Text -->
                            <div class="progress-percentage" id="progress-percentage">0%</div>
                        </div>

                        <!-- Status Text (Screen Reader Announcement) -->
                        <div class="analysis-status-text" id="analysis-status" role="status" aria-live="assertive" aria-atomic="true">
                            Initializing analysis...
                        </div>

                    </div>

                    <!-- Background Particle Effect (Ambient) -->
                    <div class="analysis-ambient-particles" aria-hidden="true">
                        <!-- Gold dust particles floating in background -->
                    </div>

                    <!-- Continue Button (For preview navigation) -->
                    <button
                        type="button"
                        class="btn btn-primary"
                        style="margin-top: 3rem;"
                        onclick="showModule('results')"
                    >
                        View Results
                    </button>
                </div>
            </section>
        </div>

        <!-- Module 5: Results -->
        <div id="module-results" class="module-container">
            <div class="preview-info">
                <strong>Module 5: Results (The Apex Match Reveal)</strong><br>
                This module displays the final compatibility report with tri-factor breakdown, radar chart for Cardinal Drivers, chromosome compatibility map, and ethical transparency disclosure.
                All visualizations are fully styled and accessible.
            </div>

            <section class="module-results" data-module="results" data-step="5">
                <div style="max-width: 800px; margin: 0 auto;">
                    <header style="text-align: center; margin-bottom: 3rem;">
                        <h2 style="font-family: var(--font-display); font-size: 1.25rem; color: var(--parchment-900); opacity: 0.8; margin-bottom: 1rem;">
                            Your Apex Match
                        </h2>

                        <div class="results-match-score">
                            <div style="display: flex; align-items: baseline; justify-content: center; gap: 0.25rem;">
                                <span style="font-family: var(--font-display); font-size: 6rem; font-weight: 300; color: var(--mediterranean-500); line-height: 1;">87</span>
                                <span style="font-family: var(--font-display); font-size: 3rem; color: var(--mediterranean-500); opacity: 0.7;">%</span>
                            </div>
                            <div style="margin-top: 0.5rem; font-family: var(--font-body); font-size: 1rem; color: var(--parchment-900); opacity: 0.8;">
                                Harmonia Compatibility
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem;">
                            <span style="font-family: var(--font-body); font-size: 0.875rem; color: var(--mediterranean-500);">
                                High Confidence Match
                            </span>
                        </div>
                    </header>

                    <article style="background: var(--parchment-100); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: var(--radius-lg); padding: 2rem; display: grid; grid-template-columns: 200px 1fr; gap: 2rem; box-shadow: 0 4px 12px rgba(42, 78, 108, 0.1); margin-bottom: 3rem;">
                        <div style="position: relative;">
                            <div style="width: 200px; aspect-ratio: 3/4; background: linear-gradient(135deg, #e6ddd0 0%, #d4c5b0 100%); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; font-family: var(--font-body); color: var(--parchment-900); opacity: 0.5;">
                                [Portrait]
                            </div>
                            <div style="position: absolute; top: 10px; right: 10px; background: rgba(255, 255, 255, 0.95); border-radius: var(--radius-full); padding: 0.5rem 1rem; display: flex; align-items: center; gap: 0.5rem; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
                                <svg width="20" height="20" viewBox="0 0 20 20">
                                    <path d="M10 3 L7 10 L10 9 L8 17 L13 8 L10 9 Z" fill="var(--champagne-500)" stroke="var(--champagne-600)" stroke-width="1"/>
                                </svg>
                                <span style="font-family: var(--font-body); font-size: 0.75rem; font-weight: 500; color: var(--champagne-600);">High Chemistry</span>
                            </div>
                        </div>

                        <div>
                            <h3 style="font-family: var(--font-display); font-size: 2rem; font-weight: 400; color: var(--mediterranean-500); margin-bottom: 0.5rem;">
                                Alexandra, <span style="font-weight: 300;">28</span>
                            </h3>
                            <p style="display: flex; align-items: center; gap: 0.5rem; font-family: var(--font-body); font-size: 0.875rem; color: var(--parchment-900); opacity: 0.7; margin-bottom: 1.5rem;">
                                <svg width="16" height="16" viewBox="0 0 16 16">
                                    <path d="M8 0C5.24 0 3 2.24 3 5c0 3.37 5 11 5 11s5-7.63 5-11c0-2.76-2.24-5-5-5zm0 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" fill="var(--mediterranean-500)"/>
                                </svg>
                                San Francisco, CA
                            </p>
                            <p style="font-family: var(--font-body); color: var(--parchment-900); opacity: 0.8; line-height: 1.6;">
                                Architect by day, painter by night. Passionate about sustainable design and finding beauty in unexpected places.
                            </p>
                        </div>
                    </article>

                    <section style="margin-top: 3rem;">
                        <h3 style="font-family: var(--font-display); font-size: 1.5rem; color: var(--mediterranean-500); margin-bottom: 2rem; text-align: center;">
                            Compatibility Breakdown
                        </h3>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem;">
                            <div style="background: rgba(212, 175, 55, 0.05); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-md); padding: 1.5rem; text-align: center;">
                                <div style="font-family: var(--font-body); font-size: 0.875rem; color: var(--parchment-900); opacity: 0.8; margin-bottom: 0.5rem;">Visual Resonance</div>
                                <div style="font-family: var(--font-display); font-size: 2rem; font-weight: 500; color: var(--mediterranean-500); margin-bottom: 0.25rem;">92%</div>
                                <div style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">(50% of total)</div>
                            </div>
                            <div style="background: rgba(212, 175, 55, 0.05); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-md); padding: 1.5rem; text-align: center;">
                                <div style="font-family: var(--font-body); font-size: 0.875rem; color: var(--parchment-900); opacity: 0.8; margin-bottom: 0.5rem;">Psychometric</div>
                                <div style="font-family: var(--font-display); font-size: 2rem; font-weight: 500; color: var(--mediterranean-500); margin-bottom: 0.25rem;">84%</div>
                                <div style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">(35% of total)</div>
                            </div>
                            <div style="background: rgba(212, 175, 55, 0.05); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-md); padding: 1.5rem; text-align: center;">
                                <div style="font-family: var(--font-body); font-size: 0.875rem; color: var(--parchment-900); opacity: 0.8; margin-bottom: 0.5rem;">Genetic</div>
                                <div style="font-family: var(--font-display); font-size: 2rem; font-weight: 500; color: var(--mediterranean-500); margin-bottom: 0.25rem;">78%</div>
                                <div style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">(10% of total)</div>
                            </div>
                            <div style="background: rgba(212, 175, 55, 0.05); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-md); padding: 1.5rem; text-align: center;">
                                <div style="font-family: var(--font-body); font-size: 0.875rem; color: var(--parchment-900); opacity: 0.8; margin-bottom: 0.5rem;">Serendipity</div>
                                <div style="font-family: var(--font-display); font-size: 2rem; font-weight: 500; color: var(--mediterranean-500); margin-bottom: 0.25rem;">95%</div>
                                <div style="font-family: var(--font-body); font-size: 0.75rem; color: var(--parchment-900); opacity: 0.6;">(5% of total)</div>
                            </div>
                        </div>
                    </section>

                    <div style="display: flex; gap: 1rem; margin-top: 3rem;">
                        <button class="btn btn-primary" style="flex: 1;">Send Like</button>
                        <button class="btn btn-secondary" style="flex: 1;">Skip</button>
                        <button class="btn btn-accent" style="flex: 1;">Review Full Profile</button>
                    </div>

                    <details style="margin-top: 3rem; padding: 2rem; background: rgba(212, 175, 55, 0.05); border-radius: var(--radius-md);">
                        <summary style="font-family: var(--font-display); font-size: 1rem; color: var(--mediterranean-500); cursor: pointer;">
                            About This Match Score
                        </summary>
                        <div style="margin-top: 1.5rem; font-family: var(--font-body); font-size: 0.875rem; color: var(--parchment-900); line-height: 1.8;">
                            <p style="margin-bottom: 1rem;">
                                <strong>How Your Score is Calculated:</strong> This compatibility score combines visual preference analysis (50%), psychometric assessment (35%), genetic compatibility (10%), and a serendipity factor (5%).
                            </p>
                            <p>
                                <strong>Limitations:</strong> This score is a probabilistic estimate, not a guarantee. Human attraction is complex and multi-dimensional.
                            </p>
                        </div>
                    </details>
                </div>
            </section>
        </div>

    </div>

    <!-- Session 1: Component Libraries -->
    <script src="js/lib/easing-functions.js"></script>
    <script src="js/lib/spring-physics.js"></script>
    <script src="js/lib/particles.js"></script>
    <script src="js/lib/liquid-fill.js"></script>

    <!-- Chart.js Library (required for HarmoniaCharts) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="js/lib/chart-config.js"></script>

    <script src="js/components/floating-input.js"></script>
    <script src="js/components/segmented-control.js"></script>
    <script src="js/components/biometric-seal.js"></script>

    <!-- Session 4: Main App & Modules -->
    <script src="js/app.js"></script>
    <script src="js/modules/1-setup.js"></script>
    <script src="js/modules/2-calibration.js"></script>
    <script src="js/modules/3-assessment.js"></script>
    <script src="js/modules/4-analysis.js"></script>
    <script src="js/modules/5-results.js"></script>

    <!-- Navigation Script -->
    <script>
        function showModule(moduleName) {
            // Hide all modules
            document.querySelectorAll('.module-container').forEach(container => {
                container.classList.remove('active');
            });

            // Show selected module
            document.getElementById('module-' + moduleName).classList.add('active');

            // Update nav buttons
            document.querySelectorAll('.preview-nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('[data-module="' + moduleName + '"]').classList.add('active');

            // Scroll to top
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
